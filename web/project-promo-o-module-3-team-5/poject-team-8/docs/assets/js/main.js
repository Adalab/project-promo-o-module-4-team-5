"use strict";const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,formObject.photo=fr.result,localStorage.setItem("formObject",JSON.stringify(formObject))}function fakeFileClick(){fileField.click()}fileField.addEventListener("change",getImage);const createBtn=document.querySelector(".js-createBtn"),collapsableShareSection=document.querySelector(".js-shareSection"),btnCreateCard=document.querySelector(".js-createBtn"),linkCreateCard=document.querySelector(".js-createCardLink");let messageCard=document.querySelector(".js-hiddenMessage");const twitterLink=document.querySelector(".js-twitterLink");function handleCreateCard(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(formObject),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{function t(e){messageCard.innerHTML=e}if(e.success){createBtn.classList.remove("createBtnColor1"),createBtn.classList.add("createBtnColor2"),collapsableShareSection.classList.remove("hidden"),linkCreateCard.innerHTML=e.cardURL,linkCreateCard.href=e.cardURL,messageCard.classList.add("js-message"),messageCard.classList.remove("js-hiddenMessage");const r="Â¡Mira la tarjeta que me ha creado Adufflabeers! ðŸ˜±ðŸ˜±";t("Â¡Mira la tarjeta que me ha creado Adufflabeers! <br>   ðŸ˜±ðŸ˜±"),twitterLink.href=`https://twitter.com/intent/tweet?text=${r}&url=${e.cardURL}`}else t("Â¡Debes rellenar todos los campos! <br> :("),messageCard.classList.add("js-message"),messageCard.classList.remove("js-hiddenMessage")})}btnCreateCard.addEventListener("click",handleCreateCard);const collapsableTitle=document.querySelector(".js-arrowCollapsable"),collapsableTitle2=document.querySelector(".js-arrowCollapsable2"),collapsableTitle3=document.querySelector(".js-arrowCollapsable3"),resetBtn=document.querySelector(".js-reset"),inputName=document.querySelector(".js-inputName"),inputJob=document.querySelector(".js-inputJob"),inputEmail=document.querySelector(".js-inputEmail"),inputPhone=document.querySelector(".js-inputPhone"),inputLinkedin=document.querySelector(".js-inputLinkedin"),inputgithub=document.querySelector(".js-inputgithub"),cardName=document.querySelector(".js-cardName"),cardJob=document.querySelector(".js-cardJob"),cardEmail=document.querySelector(".js-cardEmail"),cardPhone=document.querySelector(".js-cardPhone"),cardLinkedin=document.querySelector(".js-cardLinkedin"),cardgithub=document.querySelector(".js-cardgithub"),cardPhoto=document.querySelector(".js__profile-image"),cardPreviewPhoto=document.querySelector(".js__profile-preview"),defaultImageUrl="./assets/images/fondo.jpg",choiceColours=document.querySelectorAll(".js-choiceColours"),palettesRadio=document.querySelectorAll(".js-palette");function handlerClickHeader(e){e.currentTarget===collapsableTitle?(e.currentTarget.parentNode.parentNode.classList.toggle("collapsed"),collapsableTitle2.parentNode.parentNode.classList.add("collapsed"),collapsableTitle3.parentNode.parentNode.classList.add("collapsed")):e.currentTarget===collapsableTitle2?(e.currentTarget.parentNode.parentNode.classList.toggle("collapsed"),collapsableTitle.parentNode.parentNode.classList.add("collapsed"),collapsableTitle3.parentNode.parentNode.classList.add("collapsed")):e.currentTarget===collapsableTitle3&&(e.currentTarget.parentNode.parentNode.classList.toggle("collapsed"),collapsableTitle.parentNode.parentNode.classList.add("collapsed"),collapsableTitle2.parentNode.parentNode.classList.add("collapsed")),e.currentTarget&&e.currentTarget.classList.toggle("rotateArrow")}let formObject={palette:1,name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:defaultImageUrl};function paintCardPreview(e){const t=parseInt(e.currentTarget.id);1===t?(paintDefault(),formObject.palette=1):2===t?(paintChoice2(),formObject.palette=2):(paintChoice3(),formObject.palette=3),setInLocalStorage()}function paintChoice2(){for(const e of choiceColours)e.classList.remove("colorDefault"),e.classList.remove("colorChoice3"),e.classList.add("colorChoice2")}function paintChoice3(){for(const e of choiceColours)e.classList.remove("colorDefault"),e.classList.remove("colorChoice2"),e.classList.add("colorChoice3")}function paintDefault(){for(const e of choiceColours)e.classList.remove("colorChoice2"),e.classList.remove("colorChoice3"),e.classList.add("colorDefault")}for(const e of palettesRadio)e.addEventListener("click",paintCardPreview);function nameInputPreview(){formObject.name=inputName.value;const e=formObject.name;cardName.innerHTML=""===e?"Nombre Apellido":e}function jobInputPreview(){formObject.job=inputJob.value;const e=formObject.job;cardJob.innerHTML=""===e?"Front developer":e}function emailInputPreview(){formObject.email=inputEmail.value;const e=formObject.email;cardEmail.href=""===e?"":"mailto:"+e}function phoneInputPreview(){formObject.phone=inputPhone.value;const e=formObject.phone;cardPhone.href=""===e?"":""+e}function linkedinInputPreview(){formObject.linkedin=inputLinkedin.value;const e=formObject.linkedin;cardLinkedin.href=""===e?"":""+e}function githubInputPreview(){formObject.github=inputgithub.value;const e=formObject.github;cardgithub.href=""===e?"":""+e}function handlerInputPreview(){nameInputPreview(),jobInputPreview(),emailInputPreview(),phoneInputPreview(),linkedinInputPreview(),githubInputPreview(),setInLocalStorage()}const setInLocalStorage=()=>{const e=JSON.stringify(formObject);localStorage.setItem("formObject",e)};function handlerClickResetBtn(){formObject.palette=1,paintDefault(),palettesRadio[0].checked=!0,formObject.name="",inputName.value=formObject.name,formObject.job="",inputJob.value=formObject.job,formObject.phone="",inputPhone.value=formObject.phone,formObject.email="",inputEmail.value=formObject.email,formObject.linkedin="",inputLinkedin.value=formObject.linkedin,formObject.github="",inputgithub.value=formObject.github,formObject.photo="",cardPhoto.style.backgroundImage=`url(${defaultImageUrl})`,cardPreviewPhoto.style.backgroundImage="",handlerInputPreview()}function loadSavedUserData(){const e=localStorage.getItem("formObject");null!==e&&(formObject=JSON.parse(e),renderLSValues())}function renderLSValues(){renderLSName(),renderLSJob(),renderLSEmail(),renderLSPhone(),renderLSLinkedin(),renderLSgithub(),renderLSPalette(),renderLSPhoto(),setInLocalStorage()}function renderLSPhoto(){formObject.photo?(cardPhoto.style.backgroundImage=`url(${formObject.photo})`,cardPreviewPhoto.style.backgroundImage=`url(${formObject.photo})`):(cardPhoto.style.backgroundImage=`url(${defaultImageUrl})`,cardPreviewPhoto.style.backgroundImage="")}function renderLSName(){inputName.value=formObject.name;const e=inputName.value;cardName.innerHTML=""===e?"Nombre Apellido":e}function renderLSJob(){inputJob.value=formObject.job;const e=inputJob.value;cardJob.innerHTML=""===e?"Front developer":inputJob.value}function renderLSEmail(){inputEmail.value=formObject.email;const e=inputEmail.value;cardEmail.href=""===e?"":"mailto:"+e}function renderLSPhone(){inputPhone.value=formObject.phone;const e=inputPhone.value;cardPhone.href=""===e?"":""+e}function renderLSLinkedin(){inputLinkedin.value=formObject.linkedin;const e=inputLinkedin.value;cardLinkedin.href=""===e?"":""+e}function renderLSgithub(){inputgithub.value=formObject.github;const e=inputgithub.value;cardgithub.href=""===e?"":""+e}function renderLSPalette(){const e=formObject.palette;1===e?paintDefault():2===e?paintChoice2():paintChoice3(),palettesRadio[e-1].checked=!0}loadSavedUserData(),collapsableTitle.addEventListener("click",handlerClickHeader),collapsableTitle2.addEventListener("click",handlerClickHeader),collapsableTitle3.addEventListener("click",handlerClickHeader),resetBtn.addEventListener("click",handlerClickResetBtn),inputName.addEventListener("keyup",handlerInputPreview),inputJob.addEventListener("keyup",handlerInputPreview),inputEmail.addEventListener("keyup",handlerInputPreview),inputPhone.addEventListener("keyup",handlerInputPreview),inputLinkedin.addEventListener("keyup",handlerInputPreview),inputgithub.addEventListener("keyup",handlerInputPreview);